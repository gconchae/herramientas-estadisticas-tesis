<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herramientas Estad√≠sticas - Tesis Doctoral</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --warning-color: #f39c12;
            
            /* Colores de las Fases */
            --fase1-color: #27ae60; /* Verde */
            --fase2-color: #8e44ad; /* Morado */
            --inferencial-color: #f39c12; /* Naranja */
            --impacto-color: #e74c3c; /* Rojo */
            --apendice-color: #c0392b; /* Rojo oscuro */
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { background-color: #f5f7fa; color: #333; line-height: 1.6; padding-top: 60px; }
        
        /* --- Barra de Navegaci√≥n Unificada --- */
        .main-nav { background-color: #fff; border-bottom: 2px solid var(--light-color); position: fixed; top: 0; left: 0; width: 100%; z-index: 1001; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; height: 60px; }
        .nav-container strong { color: var(--primary-color); margin-right: 20px; font-size: 1rem; }
        .main-nav a { color: var(--dark-color); text-decoration: none; padding: 10px 15px; border-radius: 6px; font-weight: 600; transition: all 0.2s ease; }
        .main-nav a:hover { background-color: var(--light-color); color: var(--secondary-color); }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        header { background: linear-gradient(135deg, var(--primary-color), var(--dark-color)); color: white; padding: 30px 0; text-align: center; border-radius: 0 0 15px 15px; margin-bottom: 30px; }
        h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .subtitle { font-size: 1.2rem; opacity: 0.9; max-width: 800px; margin: 0 auto; line-height: 1.5; }
        
        .search-container { margin: 20px 0 30px; position: relative; }
        #toolSearch { width: 100%; padding: 15px 20px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; transition: all 0.3s ease; }
        #toolSearch:focus { outline: none; border-color: var(--secondary-color); box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2); }
        .search-icon { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: #7f8c8d; }
        
        .phases-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; }
        .phase-card { background: white; border-radius: 12px; padding: 25px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; border-left: 6px solid var(--secondary-color); }
        .phase-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12); }
        .phase-card.fase-1 { border-left-color: var(--fase1-color); }
        .phase-card.fase-2 { border-left-color: var(--fase2-color); }
        .phase-card.inferencial { border-left-color: var(--inferencial-color); }
        .phase-card.impacto { border-left-color: var(--impacto-color); }
        .phase-card.apendice { border-left-color: var(--apendice-color); grid-column: 1 / -1; }
        .phase-card h3 { color: var(--primary-color); margin-bottom: 18px; font-size: 1.4rem; }
        
        .tools-list { list-style-type: none; }
        .tools-list li { padding: 12px 0; border-bottom: 1px solid #f0f0f0; display: flex; align-items: center; transition: background-color 0.2s ease; cursor: pointer; }
        .tools-list li:hover { background-color: #f8f9fa; }
        .tools-list li:last-child { border-bottom: none; }
        .tool-badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 0.85rem; margin-right: 15px; font-weight: 600; color: white; min-width: 90px; text-align: center; flex-shrink: 0; }
        .tool-text-container { display: flex; flex-direction: column; }
        .tool-text-container strong { font-size: 1rem; color: var(--dark-color); margin-bottom: 2px; }
        .tool-text-container small { font-size: 0.85rem; color: #7f8c8d; }
        .highlight { background-color: #fff3cd; color: #664d03; padding: 2px 0; border-radius: 3px; }
        
        .fase-1 .tool-badge { background-color: var(--fase1-color); }
        .phase-card.fase-2 .tool-badge { background-color: var(--fase2-color); }
        .phase-card.inferencial .tool-badge { background-color: var(--inferencial-color); }
        .phase-card.impacto .tool-badge { background-color: var(--impacto-color); }
        .phase-card.apendice .tool-badge { background-color: var(--apendice-color); }
        
        .cta-banner { background: linear-gradient(135deg, var(--dark-color), var(--primary-color)); color: white; text-align: center; padding: 40px 20px; border-radius: 15px; margin-top: 40px; }
        .cta-banner h2 { font-size: 1.8rem; margin-bottom: 15px; }
        .cta-banner p { font-size: 1.1rem; opacity: 0.9; margin-bottom: 25px; max-width: 700px; margin-left: auto; margin-right: auto; }
        .cta-button { background-color: var(--secondary-color); color: white; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 1rem; transition: all 0.3s ease; }
        .cta-button:hover { background-color: #2980b9; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

        /* Estilos del Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 1000; overflow-y: auto; padding: 20px; }
        .modal-content { background-color: white; margin: 40px auto; border-radius: 15px; width: 90%; max-width: 800px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); animation: modalAppear 0.3s ease-out; overflow: hidden; }
        @keyframes modalAppear { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .modal-header { background: linear-gradient(135deg, var(--primary-color), var(--dark-color)); color: white; padding: 25px 30px; position: relative; }
        .modal-header h2 { font-size: 1.8rem; margin-bottom: 5px; }
        .modal-definition { font-style: italic; opacity: 0.9; margin-top: 8px; font-size: 1rem; line-height: 1.5; }
        .modal-definition a { color: #aed6f1; text-decoration: underline; }
        .modal-tool-code, .modal-scale { background-color: rgba(255, 255, 255, 0.2); padding: 5px 12px; border-radius: 20px; font-size: 0.9rem; display: inline-block; margin-top: 8px; margin-right: 10px; }
        .close-modal { position: absolute; top: 20px; right: 25px; font-size: 2rem; cursor: pointer; color: white; background: none; border: none; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s; }
        .close-modal:hover { background-color: rgba(255, 255, 255, 0.2); }
        .modal-body { padding: 30px; }
        .info-section { margin-bottom: 30px; }
        .info-section:last-child { margin-bottom: 0; }
        .info-section h3 { color: var(--primary-color); margin-bottom: 15px; font-size: 1.3rem; padding-bottom: 8px; border-bottom: 2px solid #f0f0f0; }
        .info-section p, .info-section ul, .info-section ol { margin-bottom: 15px; line-height: 1.7; }
        .info-section ul, .info-section ol { padding-left: 20px; }
        .application-context { background-color: #e8f4fc; border-left: 4px solid var(--secondary-color); padding: 15px; border-radius: 6px; margin: 15px 0; }
        .interpretation-guide { background-color: #fef9e7; border-left: 4px solid var(--warning-color); padding: 15px; border-radius: 6px; margin: 15px 0; }
        
        /* Estilos para Gu√≠as Visuales (Rutas/Caminos) */
        .methodology-path, .instrument-path { background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 25px 0 15px; }
        .methodology-path { border-left: 4px solid var(--inferencial-color); }
        .instrument-path { border-left: 4px solid var(--fase2-color); }
        .methodology-path h4, .instrument-path h4 { color: var(--primary-color); margin-bottom: 20px; font-size: 1.2rem; }
        .path-steps { position: relative; }
        .path-steps::before { content: ''; position: absolute; left: 17px; top: 5px; bottom: 5px; width: 3px; background-color: #e0e0e0; z-index: 1; }
        .path-step { display: flex; align-items: flex-start; margin-bottom: 20px; position: relative; z-index: 2; }
        .path-step:last-child { margin-bottom: 0; }
        .step-number { flex-shrink: 0; width: 38px; height: 38px; border-radius: 50%; background-color: #bdc3c7; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1rem; margin-right: 15px; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: all 0.3s ease; }
        .path-step.current .step-number { transform: scale(1.1); }
        .methodology-path .path-step.current .step-number { background-color: var(--inferencial-color); }
        .instrument-path .path-step.current .step-number { background-color: var(--fase2-color); }
        .step-text { padding-top: 5px; }
        .step-text a { color: var(--secondary-color); text-decoration: none; font-weight: bold; border-bottom: 2px dashed #d6eaf8; transition: all 0.2s; }
        .step-text a:hover { background-color: #d6eaf8; border-bottom-style: solid; }
        .step-text ul { padding-left: 20px; margin-top: 10px;}

        .modal-navigation { display: flex; justify-content: space-between; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; }
        .nav-btn { padding: 10px 20px; background: var(--secondary-color); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .nav-btn:hover:not(:disabled) { background: #2980b9; transform: translateY(-2px); }
        .nav-btn:disabled { background: #bdc3c7; cursor: not-allowed; }
        .no-results { text-align: center; padding: 40px; color: #7f8c8d; display: none; }
        .formula-container { background: #f0f2f5; border: 1px solid #e0e4e8; padding: 20px; border-radius: 8px; margin: 15px 0; text-align: center; }
        .formula { font-family: 'Cambria Math', 'Times New Roman', serif; font-size: 1.5rem; color: var(--primary-color); line-height: 1.8; }
        .formula-variables { text-align: left; font-size: 0.95rem; color: #555; max-width: 300px; margin: 15px auto 0; }
        .variable { font-family: 'Courier New', monospace; background: #e9ecef; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        
        .accordion-item { border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; overflow: hidden; }
        .accordion-header { background-color: #f8f9fa; width: 100%; border: none; text-align: left; padding: 15px 20px; font-size: 1.2rem; font-weight: 600; color: var(--primary-color); cursor: pointer; position: relative; transition: background-color 0.2s; }
        .accordion-header:hover { background-color: #e9ecef; }
        .accordion-header::after { content: '+'; font-size: 1.8rem; color: var(--secondary-color); position: absolute; right: 20px; top: 50%; transform: translateY(-50%); transition: transform 0.3s ease; }
        .accordion-header.active::after { transform: translateY(-50%) rotate(45deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.4s ease-out; background-color: white; padding: 0 20px; }
        .accordion-content h4 { color: var(--primary-color); margin-top: 20px; margin-bottom: 10px; font-size: 1.1rem; }
        .accordion-content ul, .accordion-content ol { list-style-position: inside; padding-left: 10px; }
        .accordion-content li { margin-bottom: 10px; }
        .accordion-content code { background-color: #e9ecef; padding: 3px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-weight: bold; }
        
        /* --- Estilos para la Tabla de Magnitud --- */
        .magnitude-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .magnitude-table th, .magnitude-table td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        .magnitude-table th { background-color: #f8f9fa; color: var(--primary-color); }
        .magnitude-table td:first-child { font-weight: bold; text-align: left; }

        @media (max-width: 900px) {
            .phases-container { grid-template-columns: 1fr; }
            .phase-card.apendice { grid-column: auto; }
        }
        @media (max-width: 768px) {
            h1 { font-size: 1.8rem; }
            .modal-content { width: 95%; margin: 20px auto; }
            .modal-header, .modal-body { padding: 20px; }
            .modal-navigation { flex-direction: column; gap: 10px; }
            .nav-btn { width: 100%; }
            .nav-container strong { display: none; }
            .main-nav a { padding: 8px 10px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container">
            <strong>Proyecto de Tesis:</strong>
            <!-- REEMPLAZAR: URL a una p√°gina de visi√≥n general o al repositorio de GitHub -->
            <a href="#" title="Sobre el Proyecto">Visi√≥n General</a> 
            <a href="https://gconchae.github.io/conceptos-y-hallazgos/" title="Explora la narrativa y los hallazgos">Conceptos y Hallazgos</a>
            <a href="https://gconchae.github.io/herramientas-estadisticas-tesis/" title="Explora la metodolog√≠a y estad√≠stica">Herramientas Estad√≠sticas</a>
            <!-- REEMPLAZAR: URL al PDF p√∫blico de la tesis -->
            <a href="#" target="_blank" title="Descargar la tesis completa en PDF">Ver la Tesis (PDF)</a>
        </div>
    </nav>

    <header>
        <div class="container">
            <h1>Herramientas y Procedimientos Estad√≠sticos</h1>
            <p class="subtitle">Haga clic en cualquier herramienta a continuaci√≥n para obtener una explicaci√≥n detallada de cada una y su aplicaci√≥n en nuestro estudio.</p>
        </div>
    </header>
    
    <div class="container">
        <main>
            <div class="search-container">
                <input type="text" id="toolSearch" placeholder="Buscar herramientas estad√≠sticas...">
                <span class="search-icon">üîç</span>
            </div>
            
            <div class="no-results" id="noResults">
                <h3>No se encontraron herramientas</h3>
                <p>Intenta con otros t√©rminos de b√∫squeda</p>
            </div>
            
            <div class="phases-container" id="phasesContainer">
                <!-- Las tarjetas se generan din√°micamente -->
            </div>

            <div class="cta-banner">
                <h2>¬øListo para ver los Resultados?</h2>
                <p>Ahora que ha explorado el motor metodol√≥gico, le invitamos a descubrir los hallazgos, conceptos clave y la historia completa de la investigaci√≥n.</p>
                <a href="https://gconchae.github.io/conceptos-y-hallazgos/" class="cta-button" target="_blank">Explorar los Hallazgos</a>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal" id="toolModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalToolTitle"></h2>
                <div id="modalToolDefinition" class="modal-definition"></div>
                <div id="modalHeaderBadges"></div>
                <button class="close-modal" id="closeModal" aria-label="Cerrar ventana">&times;</button>
            </div>
            <div class="modal-body" id="modalToolBody"></div>
        </div>
    </div>

    <script>
        const studyContent = {
            'descriptives': {
                definition: "Son las herramientas que usamos para 'tomar una foto' inicial de nuestros datos. Nos dicen dos cosas clave: un valor 't√≠pico' (como el promedio) y qu√© tan 'dispersos' est√°n los dem√°s valores a su alrededor.",
                content: {
                    aplicacion: `<strong>¬øC√≥mo los usamos en el estudio?</strong> Para establecer nuestra <strong>l√≠nea base</strong>, usamos principalmente cuatro medidas:<ul><li><strong>Media (M):</strong> El promedio cl√°sico de los puntajes.</li><li><strong>Desviaci√≥n Est√°ndar (DE):</strong> Nos dijo qu√© tan dispersos estaban los puntajes alrededor de la media.</li><li><strong>Mediana (Mdn):</strong> El puntaje que se encuentra justo en el medio de todos los dem√°s.</li><li><strong>Rango Intercuart√≠lico (RIQ):</strong> Nos mostr√≥ la dispersi√≥n del 50% central de los estudiantes, una medida m√°s robusta.</li></ul>`,
                    interpretacion: `<strong>¬øQu√© nos dijeron?</strong> Primero, revelaron el perfil inicial de los estudiantes: <strong>actitudes altas, pero conocimiento y pr√°cticas moderadas</strong>, sugiriendo la 'brecha actitud-conducta'.<br><br>Pero lo m√°s importante fue que, al analizar la dispersi√≥n, notamos que los datos <strong>no eran 'normales'</strong>. Esto hizo que la <strong>Mediana y el Rango Intercuart√≠lico (RIQ)</strong> fueran nuestros indicadores m√°s fiables y los protagonistas de nuestro an√°lisis descriptivo.`,
                    conexiones: `<div class="application-context"><p>¬øInteresado en la matem√°tica detr√°s de estos conceptos? <a href="#" onclick="openFormulaGuide('descriptivos')">Explora las f√≥rmulas y procedimientos en nuestra gu√≠a</a>.</p></div>`
                }
            },
            'sample_size': {
                definition: "Este es el proceso de 'control de calidad' que hicimos antes de empezar para responder a una pregunta crucial: ¬øcu√°ntos estudiantes necesitamos para que nuestros resultados sean confiables?",
                content: {
                    the_main_question: `<strong>La Pregunta Principal: Potencia Estad√≠stica</strong><p>El objetivo m√°s importante de nuestra tesis era detectar si la intervenci√≥n ten√≠a un efecto real. Usando un software especializado (G*Power), calculamos el <strong>tama√±o m√≠nimo de muestra</strong> necesario para tener una alta probabilidad (un 80%) de encontrar un efecto de tama√±o medio si este exist√≠a.</p><div class="interpretation-guide" style="margin-top: 15px;"><strong>Panel de Control (Configuraci√≥n):</strong><ul><li><strong>Tama√±o del efecto esperado (f de Cohen):</strong> 0.25 (un efecto 'medio', una expectativa realista).</li><li><strong>Nivel de significancia (Œ±):</strong> 0.05 (el est√°ndar del 95% de confianza).</li><li><strong>Potencia estad√≠stica deseada (1-Œ≤):</strong> 0.80 (un 80% de probabilidad de detectar el efecto si existe).</li></ul></div><p style="margin-top: 15px;"><strong>El resultado:</strong> El software nos indic√≥ que necesit√°bamos un m√≠nimo de <strong>34 a 40 participantes</strong>.</p>`,
                    interpretation: `<strong>¬øPor qu√© esto es tan importante?</strong><p>Nuestra muestra final fue de <strong>n = 89 estudiantes</strong>. Al ser m√°s del doble de lo requerido, tenemos una gran confianza en que nuestro estudio tuvo la <strong>potencia estad√≠stica suficiente</strong> para detectar los efectos reales de la intervenci√≥n. Esto da una enorme solidez a nuestras conclusiones.</p>`,
                }
            },
            'muestra_estudio': {
                definition: "Una descripci√≥n de los participantes y una explicaci√≥n transparente sobre la composici√≥n de los grupos, una caracter√≠stica clave de los dise√±os cuasiexperimentales en contextos reales.",
                content: {
                    composicion: `<h3>¬øQui√©nes Participaron?</h3><div class="application-context"><p>Nuestra muestra final v√°lida consisti√≥ en <strong>89 estudiantes</strong> de octavo grado, distribuidos en dos grupos:</p><ul><li><strong>Grupo Experimental (GE):</strong> n = 63 estudiantes (recibieron la intervenci√≥n).</li><li><strong>Grupo Control (GC):</strong> n = 26 estudiantes (continuaron con el curr√≠culo regular).</li></ul></div>`,
                    explicacion_desbalance: `<h3>El Desbalance y los Grupos No Equivalentes</h3>
                    <div class="interpretation-guide">
                        <p>Como es com√∫n en la investigaci√≥n educativa en entornos reales, trabajamos con <strong>grupos no equivalentes</strong>. Esto significa que los grupos Experimental y de Control no eran id√©nticos al inicio, y su diferencia de tama√±o (63 vs. 26) se explica por dos factores:</p>
                        <ol>
                            <li>
                                <strong>Muestreo con Grupos-Clase Naturales:</strong>
                                <p>Para no alterar la din√°mica escolar, usamos los cursos ya existentes. La matr√≠cula inicial (la poblaci√≥n accesible, N=146) ya presentaba un ligero desbalance:</p>
                                <ul>
                                    <li>8¬∞ Uno: 49 estudiantes</li>
                                    <li>8¬∞ Dos: 46 estudiantes</li>
                                    <li>8¬∞ Tres: 51 estudiantes</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Atrici√≥n Diferencial (P√©rdida de Participantes):</strong>
                                <p>Aplicamos criterios rigurosos de exclusi√≥n (ej. participaci√≥n incompleta, falta de autorizaci√≥n de los padres) para asegurar la calidad de los datos. Este proceso llev√≥ a una p√©rdida de participantes (<strong>atrici√≥n</strong>), que fue muy desigual:</p>
                                <ul>
                                    <li>El curso <strong>8¬∞ Tres</strong> tuvo la tasa de atrici√≥n m√°s alta, perdiendo al <strong>63%</strong> de sus estudiantes.</li>
                                    <li>En contraste, los otros dos cursos tuvieron tasas mucho menores (<strong>~33%</strong> y <strong>~20%</strong>).</li>
                                </ul>
                                <p><strong>Conclusi√≥n Clave:</strong> Fue esta <strong>atrici√≥n diferencial</strong>, y no el ligero desbalance inicial, la causa principal de la composici√≥n final de la muestra (n=89) y del riesgo de sesgo de selecci√≥n.</p>
                            </li>
                        </ol>
                    </div>`,
                    implicaciones: `<div class="application-context"><p>Tener conciencia de este desbalance fue crucial y gui√≥ nuestras decisiones anal√≠ticas:</p><ul><li><strong>Justific√≥ a√∫n m√°s el uso de pruebas no param√©tricas:</strong> Pruebas como la <a href="#" onclick="event.preventDefault(); openToolModal('mann-whitney')">U de Mann-Whitney</a> son robustas y funcionan bien con grupos de tama√±os desiguales y distribuciones no normales.</li><li><strong>Reforz√≥ la importancia del an√°lisis de potencia:</strong> Nuestro <a href="#" onclick="event.preventDefault(); openToolModal('sample_size')">c√°lculo de potencia a priori</a> demostr√≥ que nuestra muestra total (n=89) era m√°s que suficiente para detectar efectos, incluso con este desbalance.</li></ul><p>En resumen, aunque el desbalance es una limitaci√≥n del dise√±o cuasiexperimental, lo abordamos de frente con las herramientas estad√≠sticas adecuadas para garantizar la validez de nuestras conclusiones.</p></div>`
                }
            },
             'ordinal_data': {
                definition: "Son datos que tienen un orden claro, pero la distancia entre sus valores no es necesariamente uniforme. Piense en los puestos de una carrera: sabemos que 1¬∫ es mejor que 2¬∫, pero no sabemos si la diferencia de tiempo es la misma que entre el 2¬∫ y el 3¬∫.",
                content: {
                    aplicacion: `<strong>¬øD√≥nde estaban en nuestro estudio?</strong> ¬°En todas partes! Nuestras escalas de respuesta eran ordinales:<ul><li><strong>Likert de 1 a 4:</strong> Para las dimensiones Afectiva y Conductual.</li><li><strong>Claves 0, 0.5, 1:</strong> Para la dimensi√≥n Cognitiva, representando 'incorrecto', 'parcial' y 'correcto'.</li></ul>`,
                    interpretacion: `<strong>¬øPor qu√© es tan importante?</strong> Este tipo de datos rara vez sigue una 'curva de campana' perfecta. Reconocer la naturaleza ordinal de nuestros datos desde el principio fue la <strong>raz√≥n fundamental</strong> que nos guio hacia el uso de pruebas no param√©tricas, que son las herramientas correctas para este tipo de informaci√≥n.`
                }
            },
            'normality': {
                definition: "Esta prueba act√∫a como un 'inspector de calidad' que compara nuestros datos con un 'plano perfecto' de la curva de campana para ver si se ajustan a la normalidad.",
                hasScale: true,
                scale: 'W cercano a 1 (Normal) | p < 0.05 (No Normal)',
                content: {
                    how_it_works: `<strong>¬øC√≥mo funciona internamente? (La L√≥gica)</strong><p>La prueba de Shapiro-Wilk es brillante. Compara dos c√°lculos de la dispersi√≥n de los datos:</p><ol><li>La <strong>dispersi√≥n "real"</strong> de tus datos, tal como son.</li><li>La <strong>dispersi√≥n "ideal"</strong> que tendr√≠an si se ajustaran perfectamente a una curva normal.</li></ol><p>El estad√≠stico <strong>'W'</strong> es el ratio entre ambos. Si los datos son normales, ambas dispersiones son casi id√©nticas y 'W' es cercano a 1. Si no lo son, 'W' se aleja de 1.</p>`,
                    why_this_tool: `<strong>¬øPor qu√© Shapiro-Wilk y no Kolmogorov-Smirnov?</strong><p>Elegimos Shapiro-Wilk por una raz√≥n clave: <strong>es la prueba m√°s potente y especialista para esta tarea</strong>, especialmente en muestras de nuestro tama√±o. Mientras que Kolmogorov-Smirnov es una prueba m√°s general, Shapiro-Wilk es el "especialista" dise√±ado exclusivamente para detectar desviaciones de la normalidad. Dado que nuestro Grupo Control ten√≠a un tama√±o de muestra peque√±o (n=26), Shapiro-Wilk era la opci√≥n metodol√≥gicamente m√°s rigurosa y recomendada.</p>`,
                    interpretacion: `<strong>El Cruce de Caminos Metodol√≥gico</strong><p>El resultado fue claro: la mayor√≠a de nuestros datos <strong>NO eran normales</strong> (obtuvimos un <a href="#" onclick="openFormulaGuide('interpretacion')">valor p</a> < .05). Este hallazgo nos prohibi√≥ usar pruebas est√°ndar (t-Student, ANOVA) y nos oblig√≥ a tomar la <strong>'ruta no param√©trica'</strong>, confirmando que era el camino correcto y m√°s robusto para nuestra investigaci√≥n.</p>`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Decisi√≥n Cr√≠tica</h4><div class="path-steps"><div class="path-step current"><div class="step-number">1</div><div class="step-text"><strong>El Veredicto:</strong> La prueba de Shapiro-Wilk, la m√°s potente para nuestro caso, nos dijo que los datos no eran 'normales'.</div></div><div class="path-step"><div class="step-number">‚Üí</div><div class="step-text"><strong>La Consecuencia:</strong> Esto justific√≥ el uso de pruebas no param√©tricas como:<ul><li><a href="#" onclick="event.preventDefault(); openToolModal('mann-whitney')">Mann-Whitney</a></li><li><a href="#" onclick="event.preventDefault(); openToolModal('wilcoxon')">Wilcoxon</a></li><li><a href="#" onclick="event.preventDefault(); openToolModal('kruskal-wallis')">Kruskal-Wallis</a></li></ul></div></div></div></div>`
                }
            },
            'instrumento-eca': {
                definition: "Es la Escala de Conciencia Ambiental (ECA), la herramienta central que usamos para medir el 'Saber' (Cognitiva), 'Sentir' (Afectiva) y 'Hacer' (Conductual) de los estudiantes. No la creamos desde cero, sino que la adaptamos cuidadosamente a nuestro contexto.",
                content: {
                    aplicacion: `
                        <div class="instrument-path">
                            <h4>El Camino del Instrumento: De la Fuente a la Aplicaci√≥n</h4>
                            <div class="path-steps">
                                <div class="path-step">
                                    <div class="step-number">1</div>
                                    <div class="step-text">
                                        <strong>La Fuente:</strong> Nuestro punto de partida fue la escala ECA, un instrumento robusto y ya validado cient√≠ficamente por <strong>Torres Soto et al. (2022)</strong>.
                                    </div>
                                </div>
                                <div class="path-step">
                                    <div class="step-number">2</div>
                                    <div class="step-text">
                                        <strong>La Adaptaci√≥n:</strong> Realizamos una traducci√≥n y adaptaci√≥n cultural de la escala para asegurar que fuera 100% relevante y comprensible para los estudiantes de octavo grado en el contexto semirrural colombiano.
                                    </div>
                                </div>
                                <div class="path-step current">
                                    <div class="step-number">3</div>
                                    <div class="step-text">
                                        <strong>La Validaci√≥n (Control de Calidad):</strong> Sometimos nuestra versi√≥n adaptada a un riguroso proceso de validaci√≥n para asegurar su calidad. Este proceso incluy√≥:
                                        <ul>
                                            <li>Una <a href="#" onclick="event.preventDefault(); openToolModal('content-validity')">Revisi√≥n por Expertos</a> para garantizar la validez del contenido.</li>
                                            <li>Un an√°lisis de <a href="#" onclick="event.preventDefault(); openToolModal('internal-consistency')">Coherencia de Preguntas</a> para medir la fiabilidad. <strong>Resultado Clave:</strong> Este an√°lisis revel√≥ una excelente fiabilidad para las dimensiones Afectiva y Conductual, pero una fiabilidad inaceptablemente baja en la Cognitiva, un hallazgo crucial del estudio.</li>
                                            <li>Una <a href="#" onclick="event.preventDefault(); openToolModal('factor-analysis')">Validaci√≥n de Estructura</a> para confirmar que la escala med√≠a correctamente las tres dimensiones te√≥ricas.</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="path-step">
                                    <div class="step-number">4</div>
                                    <div class="step-text">
                                        <strong>La Aplicaci√≥n:</strong> Una vez validada, utilizamos la ECA Adaptada para medir la conciencia ecol√≥gica de los estudiantes antes (pretest) y despu√©s (postest) de la intervenci√≥n.
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            },
            'internal-consistency': { 
                definition: "Verificamos si todas las preguntas de una misma secci√≥n de la encuesta miden consistentemente el mismo constructo. Es como evaluar la 'sinton√≠a' de un equipo musical: aunque cada instrumento suene diferente, todos deben estar afinados y tocando la misma canci√≥n.",
                hasScale: true,
                scale: 'Œ±/œâ ‚â• 0.70 (Aceptable) | < 0.70 (Cuestionable)',
                content: { 
                    aplicacion: `<div class="application-context">
                        <p>Despu√©s de la revisi√≥n por expertos, este fue el segundo paso clave en la validaci√≥n de nuestra <a href="#" onclick="event.preventDefault(); openToolModal('instrumento-eca')">ECA Adaptada</a>. Necesit√°bamos comprobar si las preguntas de cada dimensi√≥n realmente med√≠an lo mismo de forma consistente.</p>
                    </div>
                    <strong>¬øQu√© hicimos?</strong> Usamos dos coeficientes estad√≠sticos (<a href="#" onclick="openFormulaGuide('simbologia')">Alfa de Cronbach (Œ±) y Omega de McDonald (œâ)</a>) para medir la "armon√≠a" interna de las preguntas en cada una de las tres dimensiones de la ECA.`,
                    why_two_measures: `<strong>Alfa (Œ±) vs. Omega (œâ): ¬øPor qu√© dos medidas?</strong><p>Usamos ambos coeficientes por rigor metodol√≥gico:</p><ul><li><strong>Alfa de Cronbach (Œ±):</strong> Es el indicador "cl√°sico", √∫til para comparar con estudios m√°s antiguos. Es como un director de orquesta que asume que todos los instrumentos contribuyen por igual.</li><li><strong>Omega de McDonald (œâ):</strong> Es el indicador "moderno" y m√°s preciso. Es como un director que sabe que algunos instrumentos (los √≠tems "estrella") lideran la melod√≠a y les da m√°s peso en su evaluaci√≥n.</li></ul>`,
                    interpretacion: `<strong>¬øQu√© encontramos?</strong><p>Descubrimos algo crucial. Mientras que las dimensiones <strong>Afectiva y Conductual</strong> mostraron una "sinton√≠a" aceptable (cercanos a .70), la dimensi√≥n <strong>Cognitiva</strong> estaba claramente "desafinada" (Œ± = .387).<br><br>Esto fue un hallazgo metodol√≥gico clave: la parte de nuestra encuesta que med√≠a el conocimiento no era fiable, por lo que declaramos sus resultados como <strong>no concluyentes</strong>.</p>`
                }
            },
            'content-validity': {
                definition: "Este paso consiste en preguntar a expertos si las preguntas de nuestra encuesta son adecuadas y cubren todos los aspectos importantes del concepto que queremos medir.",
                hasScale: true,
                scale: 'S-CVI/Ave ‚â• 0.90 (Excelente)',
                content: {
                    aplicacion: `<div class="application-context">
                        <p>Este fue el primer paso en el control de calidad de nuestra <a href="#" onclick="event.preventDefault(); openToolModal('instrumento-eca')">ECA Adaptada</a>. Antes de usarla, necesit√°bamos asegurarnos de que sus preguntas fueran relevantes y claras.</p>
                    </div>
                    <strong>¬øC√≥mo lo hicimos?</strong><p>Un panel de 3 expertos en educaci√≥n ambiental y psicometr√≠a calific√≥ cada una de las 21 preguntas en una escala de 1 a 4 seg√∫n su relevancia y claridad.</p><p>Para cada pregunta, contamos cu√°ntos expertos le dieron una calificaci√≥n alta (3 o 4). Luego, promediamos estos resultados de todas las preguntas para obtener un √≠ndice global llamado <strong>Promedio del √çndice de Validez de Contenido de la Escala (S-CVI/Ave)</strong>.</p>`,
                    interpretacion: `<strong>¬øQu√© encontramos?</strong><p>Obtuvimos un <strong>S-CVI/Ave = .883</strong>. Seg√∫n las gu√≠as de Polit & Beck (2006), un valor superior a .80 se considera muy bueno, y cercano a .90 es excelente. Este resultado nos dio una fuerte confianza en que nuestra encuesta, en su conjunto, med√≠a de forma v√°lida y representativa lo que quer√≠amos medir.</p>`,
                    conexiones: `<div class="application-context"><p>Para entender la matem√°tica detr√°s de este proceso, puede consultar la <a href="#" onclick="openFormulaGuide('formulas')">F√≥rmula del I-CVI</a> y la gu√≠a sobre <a href="#" onclick="openFormulaGuide('kappa')">Kappa</a> en nuestra gu√≠a de referencia.</p></div>`
                }
            },
            'fidelity': {
                definition: "Mide si la intervenci√≥n se implement√≥ en la pr√°ctica tal como fue dise√±ada. Es un control de calidad que asegura que los estudiantes recibieron la 'dosis' completa de la experiencia educativa.",
                hasScale: true,
                scale: '‚â•80% Asistencia a Sesiones',
                content: {
                    aplicacion: `<strong>¬øC√≥mo lo medimos?</strong><p>Para asegurar la fidelidad, establecimos un criterio de inclusi√≥n claro: solo los estudiantes del Grupo Experimental que asistieron al <strong>80% o m√°s de las 8 sesiones</strong> de la intervenci√≥n fueron incluidos en el an√°lisis final. Tambi√©n llevamos una bit√°cora para documentar que cada actividad se realizara seg√∫n el plan.</p>`,
                    interpretacion: `<strong>¬øPor qu√© es crucial este criterio?</strong><p>Este control nos permite afirmar con mucha m√°s confianza que los efectos positivos observados se deben realmente a nuestra intervenci√≥n dise√±ada. Asegura que no estamos comparando a estudiantes que recibieron la intervenci√≥n completa con otros que solo participaron espor√°dicamente. En resumen, garantiza que estamos midiendo el impacto de la intervenci√≥n real, no de una versi√≥n incompleta de la misma.</p>`
                }
            },
            'factor-analysis': {
                definition: "Esta es una prueba avanzada para verificar si nuestra teor√≠a sobre la estructura del constructo (el 'plano') coincide con la realidad de los datos que recolectamos (la 'construcci√≥n').",
                hasScale: true,
                scale: 'CFI/TLI > 0.90 | RMSEA < 0.08',
                content: {
                    aplicacion: `<div class="application-context">
                        <p>Esta fue la prueba de validaci√≥n estructural m√°s avanzada que aplicamos a nuestra <a href="#" onclick="event.preventDefault(); openToolModal('instrumento-eca')">ECA Adaptada</a>. El objetivo era confirmar cient√≠ficamente si la estructura de tres dimensiones (Cognitiva, Afectiva, Conductual) se correspond√≠a con los datos reales.</p>
                    </div>
                    <strong>¬øQu√© hicimos?</strong> Nuestro "plano" te√≥rico dec√≠a que la conciencia ecol√≥gica se compone de tres dimensiones: Cognitiva, Afectiva y Conductual. Usamos el AFC para comprobar si las respuestas de los 89 estudiantes realmente se agrupaban de esa manera.`,
                    interpretacion: `<strong>¬øQu√© encontramos?</strong> El an√°lisis nos dio una "calificaci√≥n de ajuste" muy buena (<a href="#" onclick="openFormulaGuide('simbologia')">CFI</a>=.913 y <a href="#" onclick="openFormulaGuide('formulas')">RMSEA</a>=.037). Esto significa que la "construcci√≥n" (los datos) <strong>coincid√≠a con nuestro "plano"</strong>, validando el enfoque central de nuestra tesis. <br><br><em>(Nota: El t√©rmino <strong>DWLS</strong> se refiere al "motor" de c√°lculo que usamos porque nuestros datos eran <a href="#" onclick="event.preventDefault(); openToolModal('ordinal_data')">ordinales</a>, lo que hace el an√°lisis m√°s preciso).</em>`
                }
            },
            'mann-whitney': { 
                definition: "Esta es la prueba principal de nuestro 'juicio'. Nos permite responder a la pregunta m√°s importante: al final del estudio, ¬øel grupo que recibi√≥ la intervenci√≥n tuvo puntajes significativamente mejores que el grupo que no la recibi√≥?", 
                content: { 
                    aplicacion: `<strong>El 'Veredicto' Principal:</strong> La usamos para comparar los puntajes finales (postest) entre el Grupo Experimental y el Grupo Control. Por ejemplo, en la dimensi√≥n afectiva, el resultado fue claro (U=339.5, p<.001), indicando una diferencia muy significativa a favor del grupo que particip√≥ en las actividades.`, 
                    interpretacion: `<strong>¬øQu√© significa?</strong> Un <a href="#" onclick="openFormulaGuide('interpretacion')">valor p < .05</a> nos permiti√≥ concluir con confianza que la diferencia observada no fue por azar, sino un efecto real de nuestra intervenci√≥n pedag√≥gica.`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Punto de Partida:</strong> Verificamos que los datos no eran 'normales' con <a href="#" onclick="event.preventDefault(); openToolModal('normality')">Shapiro-Wilk</a>.</div></div><div class="path-step current"><div class="step-number">2</div><div class="step-text"><strong>Decisi√≥n Clave:</strong> Al necesitar comparar dos grupos independientes con esos datos, esta prueba era la herramienta correcta.</div></div><div class="path-step"><div class="step-number">3</div><div class="step-text"><strong>Medici√≥n Final:</strong> Cuantificamos la magnitud de esta diferencia con el <a href="#" onclick="event.preventDefault(); openToolModal('rosenthal')">r de Rosenthal</a>.</div></div></div></div>` 
                } 
            },
            'wilcoxon': { 
                definition: "Esta prueba es como un 'informe de progreso' personal. En lugar de comparar a los estudiantes con otros, los compara consigo mismos para responder: ¬øhubo una mejora significativa desde su propio punto de partida (pretest) hasta el final (postest)?", 
                content: { 
                    aplicacion: `<strong>El 'Antes y Despu√©s':</strong> La usamos exclusivamente dentro del Grupo Experimental. Por ejemplo, en la dimensi√≥n conductual, el resultado (W=424.50, p=.016) nos mostr√≥ que los estudiantes, despu√©s de la intervenci√≥n, reportaron realizar pr√°cticas ecol√≥gicas con una frecuencia significativamente mayor que antes.`, 
                    interpretacion: `<strong>¬øQu√© significa?</strong> Un <a href="#" onclick="openFormulaGuide('interpretacion')">valor p < .05</a> aqu√≠ confirma que el cambio observado dentro del grupo no fue una fluctuaci√≥n aleatoria, sino una tendencia de mejora real a lo largo del tiempo.`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Punto de Partida:</strong> Verificamos que los datos no eran 'normales' con <a href="#" onclick="event.preventDefault(); openToolModal('normality')">Shapiro-Wilk</a>.</div></div><div class="path-step current"><div class="step-number">2</div><div class="step-text"><strong>Decisi√≥n Clave:</strong> Al necesitar comparar dos momentos (antes y despu√©s) para las mismas personas, esta prueba era la herramienta correcta.</div></div><div class="path-step"><div class="step-number">3</div><div class="step-text"><strong>Medici√≥n Final:</strong> Cuantificamos la magnitud de este cambio con el <a href="#" onclick="event.preventDefault(); openToolModal('rosenthal')">r de Rosenthal</a>.</div></div></div></div>` 
                } 
            },
            'kruskal-wallis': { 
                definition: "Esta prueba funciona como nuestro 'control de calidad'. La usamos para responder una pregunta de validez crucial: ¬ølas diferencias que vemos se deben a nuestra intervenci√≥n, o podr√≠an ser simplemente porque los estudiantes estaban en diferentes aulas (8¬∞ Uno, 8¬∞ Dos, 8¬∞ Tres)?", 
                content: { 
                    how_it_works: `<strong>¬øC√≥mo funciona? La L√≥gica del Ranking</strong><p>Esta prueba no utiliza los puntajes directos, sino sus <strong>rangos</strong>. Imagina que ordenamos a todos los 89 estudiantes en una 'fila' del puntaje m√°s bajo al m√°s alto. La prueba luego suma los puestos de esa fila que le correspondieron a cada curso.</p><p>El estad√≠stico <a href="#" onclick="openFormulaGuide('formulas')">H</a> simplemente comprueba si la suma de los rangos de un grupo es tan diferente a la de los otros que es improbable que sea por azar.</p>`,
                    aplicacion: `<strong>Buscando 'Variables Ocultas':</strong> La usamos para comparar los puntajes entre los tres cursos de octavo grado, tanto antes como despu√©s de la intervenci√≥n.`, 
                    interpretacion: `<strong>¬øQu√© encontramos?</strong> No encontramos ninguna diferencia significativa entre los cursos (todos los <a href="#" onclick="openFormulaGuide('interpretacion')">valores p</a> fueron > .36). ¬°Estas fueron excelentes noticias! Signific√≥ que el efecto observado era consistente en toda la muestra y no depend√≠a del aula espec√≠fica de los estudiantes.`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Punto de Partida:</strong> Verificamos que los datos no eran 'normales' con <a href="#" onclick="event.preventDefault(); openToolModal('normality')">Shapiro-Wilk</a>.</div></div><div class="path-step current"><div class="step-number">2</div><div class="step-text"><strong>Decisi√≥n Clave:</strong> Al necesitar comparar <strong>tres o m√°s grupos</strong>, esta era la prueba correcta.</div></div><div class="path-step"><div class="step-number">3</div><div class="step-text"><strong>Siguiente Paso (Condicional):</strong> Si hubi√©ramos encontrado diferencias, habr√≠amos necesitado la <a href="#" onclick="event.preventDefault(); openToolModal('dunn')">Prueba de Dunn</a>.</div></div><div class="path-step"><div class="step-number">4</div><div class="step-text"><strong>Medici√≥n Final:</strong> Para medir la magnitud del efecto, usamos el <a href="#" onclick="event.preventDefault(); openToolModal('eta-squared')">√âpsilon Cuadrado</a>.</div></div></div></div>`
                } 
            },
            'dunn': { 
                definition: "Piense en esta prueba como el trabajo de un 'detective' que solo se llama si la prueba anterior (Kruskal-Wallis) encuentra una diferencia general. Su trabajo es investigar m√°s a fondo para identificar exactamente qu√© pares de grupos son diferentes entre s√≠.", 
                content: { 
                    aplicacion: `<strong>¬øLa usamos? No. Y eso fue una buena noticia.</strong> Como nuestra <a href="#" onclick="event.preventDefault(); openToolModal('kruskal-wallis')">Prueba de Kruskal-Wallis</a> no encontr√≥ diferencias significativas entre los cursos, no fue necesario llamar al 'detective'.`, 
                    interpretacion: `El hecho de no necesitar esta prueba reforz√≥ nuestra conclusi√≥n de que los cursos eran homog√©neos y que las diferencias encontradas en el estudio se deb√≠an a la intervenci√≥n, no a particularidades de cada aula.`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Paso Previo:</strong> Se ejecuta una <a href="#" onclick="event.preventDefault(); openToolModal('kruskal-wallis')">Prueba de Kruskal-Wallis</a>.</div></div><div class="path-step current"><div class="step-number">2</div><div class="step-text"><strong>Condici√≥n de Uso:</strong> Se aplica esta prueba <strong>solo si</strong> el resultado anterior es significativo. Como no lo fue, no la usamos.</div></div></div></div>` 
                } 
            },
            'rosenthal': { 
                definition: "Esta 'r' NO es la famosa correlaci√≥n de Pearson. Piense en ella como una 'regla de impacto' dise√±ada espec√≠ficamente para medir la magnitud o importancia pr√°ctica de los resultados obtenidos en nuestras pruebas no param√©tricas.",
                hasScale: true, 
                scale: 'r ‚âà 0.1 (peque√±o) | ‚âà 0.3 (moderado) | ‚â• 0.5 (grande)', 
                content: { 
                    why_this_r: `<strong>¬øPor qu√© esta 'r' espec√≠fica (de Rosenthal)?</strong><p>La usamos porque es el est√°ndar metodol√≥gico para nuestro dise√±o. Despu√©s de que pruebas como <a href="#" onclick="event.preventDefault(); openToolModal('mann-whitney')">Mann-Whitney</a> nos dicen <em>si</em> hubo una diferencia, esta 'r' nos dice <em>cu√°n grande e importante</em> fue esa diferencia.</p><p>Es un <strong>indicador de magnitud</strong>, no de relaci√≥n. Para una explicaci√≥n m√°s detallada sobre los diferentes tipos de 'r', puede consultar nuestra <a href="#" onclick="openFormulaGuide('r-types')">Gu√≠a de Aclaraci√≥n</a>.</p>`,
                    interpretacion: `<strong>¬øC√≥mo la usamos para interpretar los resultados?</strong><p>Esta 'r' fue clave para entender la relevancia pr√°ctica de nuestros hallazgos:</p><ul><li>Un <strong>r = 0.59</strong> en la dimensi√≥n afectiva nos dijo que el impacto de la intervenci√≥n en las actitudes fue <strong>grande</strong>.</li><li>Un <strong>r = 0.27</strong> en la dimensi√≥n conductual nos mostr√≥ un impacto <strong>peque√±o-moderado</strong>.</li></ul>`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Prueba de Contraste:</strong> Ejecutamos una prueba como <a href="#" onclick="event.preventDefault(); openToolModal('mann-whitney')">Mann-Whitney</a> para ver <em>si</em> hab√≠a una diferencia.</div></div><div class="path-step current"><div class="step-number">2</div><div class="step-text"><strong>Medici√≥n de Magnitud:</strong> Como la diferencia fue significativa, usamos esta medida (r) para cuantificar <em>cu√°n grande</em> era esa diferencia.</div></div><div class="path-step"><div class="step-number">3</div><div class="step-text"><strong>Paso de Verificaci√≥n:</strong> Para mayor rigor, confirmamos esta medici√≥n con una prueba m√°s robusta, la <a href="#" onclick="event.preventDefault(); openToolModal('cliff')">Delta de Cliff</a>.</div></div></div></div>`
                } 
            },
            'cliff': { 
                definition: "Piense en Delta de Cliff (Œ¥) como nuestro 'calibrador digital' de alta precisi√≥n. Lo usamos para verificar y confirmar la medici√≥n obtenida con nuestra 'cinta m√©trica' principal (el r de Rosenthal).",
                hasScale: true, 
                scale: '|Œ¥| ‚âà 0.147 (peque√±o) | ‚âà 0.33 (medio) | ‚â• 0.474 (grande)', 
                content: { 
                    why_this_tool: `<strong>¬øQu√© la hace una mejor herramienta de verificaci√≥n?</strong><p>Delta de Cliff es superior al 'r' en dos aspectos: es inmune a valores extremos (outliers) y su resultado es m√°s f√°cil de interpretar en el mundo real. Nos dice la <strong>probabilidad</strong> de que una persona al azar del grupo con la intervenci√≥n tenga un puntaje m√°s alto que una del grupo de control.</p><p>Es el an√°logo no param√©trico de la famosa <strong>'d de Cohen'</strong>.</p>`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Prueba de Contraste:</strong> Ejecutamos una prueba como <a href="#" onclick="event.preventDefault(); openToolModal('mann-whitney')">Mann-Whitney</a>.</div></div><div class="path-step"><div class="step-number">2</div><div class="step-text"><strong>Medici√≥n Principal:</strong> Cuantificamos la magnitud del efecto con el <a href="#" onclick="event.preventDefault(); openToolModal('rosenthal')">r de Rosenthal</a>.</div></div><div class="path-step current"><div class="step-number">3</div><div class="step-text"><strong>Verificaci√≥n Robusta:</strong> Usamos esta medida (Œ¥) como un "control de calidad" final para confirmar la magnitud del efecto con mayor precisi√≥n.</div></div></div></div>`
                } 
            },
            'eta-squared': { 
                definition: "Es una medida que nos dice qu√© 'porcentaje' de las diferencias totales en los puntajes de los estudiantes se puede explicar por la pertenencia a diferentes grupos.", 
                hasScale: true, 
                scale: 'Œµ¬≤ ‚âà 0.01 (peque√±o) | ‚âà 0.06 (moderado) | ‚â• 0.14 (grande)', 
                content: { 
                    aplicacion: `<h3>¬øC√≥mo lo usamos en el estudio?</h3><p>Esta medida fue crucial en dos momentos:</p><ol><li><strong>Para confirmar el efecto global:</strong> En la Tabla 19, la usamos para verificar el impacto de la intervenci√≥n al comparar el <strong>Grupo Experimental vs. el de Control</strong>.</li><li><strong>Para el control de calidad:</strong> Su uso principal fue para analizar si hab√≠a diferencias significativas entre los <strong>tres cursos (8¬∞ Uno, 8¬∞ Dos y 8¬∞ Tres)</strong>. El resultado (un efecto casi nulo) nos confirm√≥ que el impacto de la intervenci√≥n fue consistente y no depend√≠a del aula espec√≠fica de los estudiantes.</li></ol>`,
                    interpretacion: `<h3>¬øC√≥mo se interpreta? La Analog√≠a del Pastel</h3><p>Un <strong>Œµ¬≤ = 0.216</strong> en la dimensi√≥n afectiva (Tabla 19) nos dijo que un <strong>21.6% de la variabilidad</strong> en las actitudes se explicaba por la diferencia entre haber recibido la intervenci√≥n o no. ¬°Un efecto grande!</p>`,
                    why_this_tool: `<h3>Nota Metodol√≥gica: ¬øPor qu√© Œµ¬≤ (√âpsilon) y no Œ∑¬≤ (Eta)?</h3><div class="application-context"><p>Aunque a menudo se usa el s√≠mbolo <strong>Œ∑¬≤ (Eta Cuadrado)</strong>, tiende a sobrestimar el impacto. Nosotros calculamos y reportamos <strong>Œµ¬≤ (√âpsilon Cuadrado)</strong> porque es una versi√≥n corregida y m√°s precisa, ofreciendo una estimaci√≥n m√°s honesta del efecto. Fue una decisi√≥n para maximizar el rigor metodol√≥gico.</p></div>`,
                    conexiones: `<div class="methodology-path"><h4>Nuestra Ruta de An√°lisis</h4><div class="path-steps"><div class="path-step"><div class="step-number">1</div><div class="step-text"><strong>Punto de Partida:</strong> Verificamos que los datos no eran 'normales' con <a href="#" onclick="event.preventDefault(); openToolModal('normality')">Shapiro-Wilk</a>.</div></div><div class="path-step"><div class="step-number">2</div><div class="step-text"><strong>Decisi√≥n Clave:</strong> Al necesitar comparar tres o m√°s grupos, usamos la <a href="#" onclick="event.preventDefault(); openToolModal('kruskal-wallis')">Prueba de Kruskal-Wallis</a>.</div></div><div class="path-step current"><div class="step-number">3</div><div class="step-text"><strong>Medici√≥n Final:</strong> Para medir la magnitud del efecto general de Kruskal-Wallis, usamos el <strong>√âpsilon Cuadrado</strong>.</div></div></div></div>`
                } 
            },
            'formulas': { 
                definition: 'Una gu√≠a de referencia para las principales f√≥rmulas y notaciones estad√≠sticas utilizadas en esta investigaci√≥n.',
                content: {
                    full_content: `
                        <div class="accordion-item" id="accordion-descriptivos">
                            <button class="accordion-header">Estad√≠sticos Descriptivos</button>
                            <div class="accordion-content">
                                <h4>Media (Promedio)</h4>
                                <div class="formula-container"><div class="formula" style="font-size: 1.5rem;">M = ( Œ£ xi ) / n</div></div>
                                <p>Donde <code>Œ£ xi</code> es la suma de todos los puntajes y <code>n</code> es el n√∫mero de estudiantes.</p>
                                <br>
                                <h4>Mediana y Rango Intercuart√≠lico (RIQ)</h4>
                                <p>Estas medidas no tienen una f√≥rmula simple, son <strong>procedimentales</strong>:</p>
                                <ol>
                                    <li><strong>Ordenar:</strong> Se ordenan todos los puntajes de menor a mayor.</li>
                                    <li><strong>Mediana (Q2):</strong> Es el valor que queda justo en el medio de la lista (por definici√≥n, la mediana es siempre el segundo cuartil).</li>
                                    <li><strong>Cuartiles (Q1, Q3):</strong> Q1 es el valor medio de la primera mitad de los datos, y Q3 es el valor medio de la segunda mitad.</li>
                                    <li><strong>RIQ:</strong> Es la diferencia entre el tercer y el primer cuartil (RIQ = Q3 - Q1).</li>
                                </ol>
                            </div>
                        </div>
                        <div class="accordion-item" id="accordion-simbologia">
                            <button class="accordion-header">Simbolog√≠a (Notaci√≥n)</button>
                            <div class="accordion-content">
                                <h4>S√≠mbolos Generales</h4>
                                <ul>
                                    <li><code>N</code>: Tama√±o de la poblaci√≥n total.</li>
                                    <li><code>n</code>: Tama√±o de la muestra o subgrupo.</li>
                                    <li><code>p</code>: Valor de significancia. Si <strong>p < .05</strong>, el resultado es estad√≠sticamente significativo.</li>
                                    <li><code>df</code>: Grados de libertad, un par√°metro t√©cnico de las pruebas.</li>
                                </ul>
                                <h4>Variables de Contraste</h4>
                                <ul>
                                    <li><code>U, W, H</code>: Estad√≠sticos de las pruebas U de Mann-Whitney, Wilcoxon y Kruskal-Wallis.</li>
                                    <li><code>œá¬≤</code> (Chi-cuadrado): Estad√≠stico usado en el AFC.</li>
                                </ul>
                                <h4>√çndices de Ajuste del Modelo (AFC)</h4>
                                <ul>
                                    <li><code>CFI / TLI</code>: √çndices de ajuste comparativo. Valores > .90 son buenos.</li>
                                    <li><code>RMSEA</code>: Error de aproximaci√≥n. Valores < .08 son buenos.</li>
                                </ul>
                                <h4>Estad√≠sticos de Fiabilidad y Tama√±o del Efecto</h4>
                                <ul>
                                    <li><code>Œ±, œâ</code>: Coeficientes de fiabilidad (Alfa de Cronbach, Omega de McDonald). <strong>Para entender su diferencia conceptual, consulte la herramienta <a href="#" onclick="event.preventDefault(); openToolModal('internal-consistency')">Coherencia de Preguntas</a>.</strong></li>
                                    <li><code>r, Œ¥, Œµ¬≤, Œ∑¬≤</code>: Medidas de la magnitud pr√°ctica del efecto.</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion-item" id="accordion-r-types">
                            <button class="accordion-header">Aclaraci√≥n Importante: El S√≠mbolo 'r' en Estad√≠stica</button>
                            <div class="accordion-content">
                                <h4>No Todas las 'r' son Iguales</h4>
                                <p>En estad√≠stica, la letra 'r' se usa para diferentes prop√≥sitos. Es crucial distinguirlos para una correcta interpretaci√≥n:</p>
                                <ul>
                                    <li><strong>'r' como Tama√±o del Efecto (Uso en esta Tesis):</strong>
                                        <ul>
                                            <li><strong>Nombre:</strong> r de Rosenthal (1984).</li>
                                            <li><strong>Prop√≥sito:</strong> Medir la <strong>magnitud o importancia</strong> de un hallazgo en pruebas no param√©tricas (Mann-Whitney, Wilcoxon).</li>
                                            <li><strong>Interpretaci√≥n:</strong> Escala de peque√±o a grande (0.1, 0.3, 0.5).</li>
                                        </ul>
                                    </li>
                                    <br>
                                    <li><strong>'r' como Coeficiente de Correlaci√≥n (Otros Usos):</strong>
                                        <ul>
                                            <li><strong>Nombre:</strong> r de Pearson, r de Spearman, etc.</li>
                                            <li><strong>Prop√≥sito:</strong> Medir el grado de relaci√≥n entre dos variables (ej. a m√°s X, m√°s Y).</li>
                                            <li><strong>Interpretaci√≥n:</strong> Va de -1 a +1.</li>
                                        </ul>
                                    </li>
                                </ul>
                                <div class="interpretation-guide">
                                    <p><strong>En resumen:</strong> La 'r' utilizada en esta tesis es exclusivamente el <strong>r de Rosenthal</strong>, un indicador de impacto, y no debe confundirse con un coeficiente de correlaci√≥n.</p>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item" id="accordion-formulas">
                            <button class="accordion-header">F√≥rmulas Clave de Inferencia</button>
                            <div class="accordion-content">
                                <h4>√çndice de Validez de Contenido (I-CVI)</h4>
                                <div class="formula-container"><div class="formula" style="font-size: 1.2rem;">I-CVI = (N¬∫ de expertos en acuerdo) / (N¬∫ total de expertos)</div></div>
                                <h4>r de Rosenthal</h4>
                                <div class="formula-container"><div class="formula">r = Z / ‚àöN</div></div>
                                <h4>√âpsilon Cuadrado (para Kruskal-Wallis)</h4>
                                <div class="formula-container"><div class="formula">Œµ¬≤ = (H - k + 1) / (n - k)</div></div>
                                <h4>F√≥rmula de Kruskal-Wallis (Estad√≠stico H)</h4>
                                <div class="formula-container"><div class="formula" style="font-size: 1.4rem;">H = [ 12 / (N(N+1)) ] * [ Œ£(R·µ¢¬≤/n·µ¢) ] - 3(N+1)</div><div class="formula-variables">Donde:<br><span class="variable">N</span> = Tama√±o total de la muestra<br><span class="variable">k</span> = N√∫mero de grupos<br><span class="variable">R·µ¢</span> = Suma de rangos del grupo i<br><span class="variable">n·µ¢</span> = Tama√±o del grupo i</div></div>
                                 <h4>RMSEA (Error de Aproximaci√≥n)</h4>
                                <div class="formula-container"><div class="formula">RMSEA = ‚àö((œá¬≤ - df) / (df * (N - 1)))</div></div>
                                <h4>Delta de Cliff (Conceptual)</h4>
                                <div class="formula-container"><div class="formula">Œ¥ = P(X > Y) - P(Y > X)</div></div>
                            </div>
                        </div>
                        <div class="accordion-item" id="accordion-kappa">
                            <button class="accordion-header">Ajuste por Azar (Kappa Modificado)</button>
                            <div class="accordion-content">
                                <h4>Prop√≥sito</h4>
                                <p>El coeficiente Kappa (k*) es una medida m√°s exigente que el I-CVI. Ajusta el nivel de acuerdo entre los expertos eliminando la probabilidad de que hayan coincidido simplemente por azar.</p>
                                <h4>F√≥rmula</h4>
                                <div class="formula-container"><div class="formula" style="font-size: 1.4rem;">k* = (I-CVI - Pc) / (1 - Pc)</div></div>
                                <h4>Interpretaci√≥n</h4>
                                <ul>
                                    <li>‚â• 0.74: Excelente</li>
                                    <li>0.60 ‚Äì 0.74: Bueno</li>
                                    <li>0.40 ‚Äì 0.59: Regular</li>
                                    <li>< 0.40: Pobre</li>
                                </ul>
                            </div>
                        </div>
                        <div class="accordion-item" id="accordion-interpretacion">
                            <button class="accordion-header">Gu√≠a R√°pida de Interpretaci√≥n</button>
                            <div class="accordion-content">
                                <h4>Significancia Estad√≠stica (valor p)</h4>
                                <p>Un <strong>valor p < .05</strong> nos dice que un resultado probablemente no es producto del azar.</p>
                                <h4>Magnitud Pr√°ctica (Tama√±o del Efecto)</h4>
                                <p>Nos dice qu√© tan importante es el resultado. Usamos los puntos de corte de Cohen, presentados en la siguiente tabla para mayor claridad:</p>
                                <table class="magnitude-table">
                                    <thead>
                                        <tr>
                                            <th>Magnitud</th>
                                            <th>r (Rosenthal)</th>
                                            <th>|Œ¥| (Delta de Cliff)</th>
                                            <th>Œµ¬≤ (√âpsilon Cuadrado)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Peque√±o</td>
                                            <td>‚âà 0.10</td>
                                            <td>‚âà 0.147</td>
                                            <td>‚âà 0.01</td>
                                        </tr>
                                        <tr>
                                            <td>Moderado</td>
                                            <td>‚âà 0.30</td>
                                            <td>‚âà 0.33</td>
                                            <td>‚âà 0.06</td>
                                        </tr>
                                        <tr>
                                            <td>Grande</td>
                                            <td>‚â• 0.50</td>
                                            <td>‚â• 0.474</td>
                                            <td>‚â• 0.14</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `
                } 
            }
        };

        const phasesData = [
            { id: 'fase1', title: 'FASE 1: PREPARACI√ìN Y SUPUESTOS', type: 'fase-1', tools: [ { name: 'Estad√≠sticos Descriptivos', code: 'Media / Mediana', description: 'Resumen inicial de los datos', contentKey: 'descriptives' }, { name: 'Naturaleza de los Datos', code: 'Escala Ordinal', description: 'Tipo de datos y sus implicaciones', contentKey: 'ordinal_data' }, { name: 'Prueba de Normalidad', code: 'Shapiro-Wilk', description: 'Verificaci√≥n del supuesto de normalidad', contentKey: 'normality' }, { name: 'Validaci√≥n del Tama√±o Muestral', code: 'Potencia a Priori', description: 'Asegura que la muestra es suficiente', contentKey: 'sample_size' }, { name: 'La Muestra del Estudio (n=89)', code: 'Muestreo y Composici√≥n', description: 'Qui√©nes participaron y c√≥mo abordamos el desbalance entre los grupos.', contentKey: 'muestra_estudio' }, { name: 'Fidelidad de Intervenci√≥n', code: 'Adherencia ‚â•80%', description: 'Asegura la validez de la intervenci√≥n, un pilar del dise√±o del estudio.', contentKey: 'fidelity' } ] },
            { id: 'fase2', title: 'FASE 2: VALIDACI√ìN DEL INSTRUMENTO', type: 'fase-2', tools: [ { name: 'El Instrumento de Medici√≥n (ECA Adaptada)', code: 'ECA (Torres et al., 2022)', description: 'La historia y el proceso de validaci√≥n de nuestra herramienta de medici√≥n.', contentKey: 'instrumento-eca' }, { name: 'Revisi√≥n por Expertos (Validez de Contenido)', code: '√çndice I-CVI', description: 'Asegura que las preguntas son correctas', contentKey: 'content-validity' }, { name: 'Coherencia de Preguntas', code: 'Alfa / Omega', description: 'Mide si las preguntas de una secci√≥n est√°n sintonizadas', contentKey: 'internal-consistency' }, { name: 'Validaci√≥n de Estructura', code: 'AFC (RMSEA, CFI)', description: 'Confirma que el modelo de 3 dimensiones es correcto', contentKey: 'factor-analysis' } ] },
            { id: 'inferencial', title: 'AN√ÅLISIS INFERENCIAL: PRUEBAS DE CONTRASTE', type: 'inferencial', tools: [ { name: 'Comparando Grupos: ¬øFuncion√≥?', code: 'U de Mann-Whitney', description: 'Compara Grupo Experimental vs. Control al final', contentKey: 'mann-whitney' }, { name: 'Midiendo el Cambio: ¬øMejoraron?', code: 'Prueba de Wilcoxon', description: 'Compara el antes y despu√©s en el mismo grupo', contentKey: 'wilcoxon' }, { name: 'Control de Calidad: ¬øInfluy√≥ el Curso?', code: 'Kruskal-Wallis', description: 'Verifica si hubo diferencias entre los salones de clase', contentKey: 'kruskal-wallis' }, { name: 'Investigaci√≥n a Fondo (si aplica)', code: 'Prueba de Dunn', description: 'Identifica qu√© grupos espec√≠ficos difieren', contentKey: 'dunn' } ] },
            { id: 'impacto', title: 'AN√ÅLISIS DE IMPACTO: TAMA√ëO DEL EFECTO', type: 'impacto', tools: [ { name: 'Tama√±o del Efecto para Dos Grupos (r)', code: 'r de Rosenthal', description: 'Nuestra "regla" principal para medir qu√© tan grande fue el impacto al comparar los dos grupos principales del estudio: el Experimental vs. el de Control.', contentKey: 'rosenthal' }, { name: 'Verificaci√≥n Robusta del Efecto (Œ¥)', code: 'Delta de Cliff', description: 'Una medida alternativa y m√°s precisa que usamos para confirmar la magnitud del efecto entre el Grupo Experimental y el de Control.', contentKey: 'cliff' }, { name: 'Tama√±o del Efecto para M√∫ltiples Grupos (Œµ¬≤)', code: '√âpsilon Cuadrado', description: 'La medida del efecto que usamos para Kruskal-Wallis. Es la versi√≥n corregida del conocido eta cuadrado (Œ∑¬≤).', contentKey: 'eta-squared' } ] },
            { id: 'apendice', title: 'GU√çA DE F√ìRMULAS Y NOTACI√ìN', type: 'apendice', tools: [ { name: 'Formulario y Gu√≠a de Interpretaci√≥n', code: 'F√≥rmulas', description: 'Referencia r√°pida de la simbolog√≠a y matem√°tica', contentKey: 'formulas' } ] }
        ];
        
        // El resto del script
        let currentToolIndex = 0; let allTools = []; let filteredTools = [];
        const phasesContainer = document.getElementById('phasesContainer'); const toolModal = document.getElementById('toolModal'); const modalToolTitle = document.getElementById('modalToolTitle'); const modalToolDefinition = document.getElementById('modalToolDefinition'); const modalHeaderBadges = document.getElementById('modalHeaderBadges'); const modalToolBody = document.getElementById('modalToolBody'); const closeModal = document.getElementById('closeModal'); const toolSearch = document.getElementById('toolSearch'); const noResults = document.getElementById('noResults');
        function renderPhaseCards(filter = '') { const lowerCaseFilter = filter.toLowerCase(); phasesContainer.innerHTML = ''; let hasResults = false; const highlight = (text, filter) => { if (!filter) return text; return text.replace(new RegExp(filter, 'gi'), `<span class="highlight">$&</span>`); }; phasesData.forEach(phase => { const filteredToolsInPhase = phase.tools.filter(tool => tool.name.toLowerCase().includes(lowerCaseFilter) || tool.code.toLowerCase().includes(lowerCaseFilter) || tool.description.toLowerCase().includes(lowerCaseFilter)); if (filteredToolsInPhase.length > 0) { hasResults = true; const card = document.createElement('div'); card.className = `phase-card ${phase.type}`; let toolsHTML = '<ul class="tools-list">'; filteredToolsInPhase.forEach(tool => { toolsHTML += `<li onclick="openToolModal('${tool.contentKey}')"><span class="tool-badge">${highlight(tool.code, lowerCaseFilter)}</span><div class="tool-text-container"><strong>${highlight(tool.name, lowerCaseFilter)}</strong><small>${highlight(tool.description, lowerCaseFilter)}</small></div></li>`; }); toolsHTML += '</ul>'; card.innerHTML = `<h3>${phase.title}</h3>${toolsHTML}`; phasesContainer.appendChild(card); } }); allTools = phasesData.flatMap(phase => phase.tools); filteredTools = allTools.filter(tool => tool.name.toLowerCase().includes(lowerCaseFilter) || tool.code.toLowerCase().includes(lowerCaseFilter) || tool.description.toLowerCase().includes(lowerCaseFilter)); noResults.style.display = hasResults ? 'none' : 'block'; }
        function openToolModal(contentKey) { toolModal.style.display = 'block'; document.body.style.overflow = 'hidden'; const toolContent = studyContent[contentKey]; const phaseTool = allTools.find(t => t.contentKey === contentKey); modalToolTitle.textContent = phaseTool.name; modalToolDefinition.innerHTML = toolContent.definition; currentToolIndex = filteredTools.findIndex(t => t.contentKey === contentKey); let headerBadgesHTML = `<span class="modal-tool-code">${phaseTool.code}</span>`; if (toolContent.hasScale) { headerBadgesHTML += `<span class="modal-scale">${toolContent.scale}</span>`; } modalHeaderBadges.innerHTML = headerBadgesHTML; let modalContent = ''; if (contentKey === 'formulas') { modalContent = toolContent.content.full_content; } else { let mainContent = ''; let connectionsContent = ''; for (const [key, value] of Object.entries(toolContent.content)) { if (key === 'conexiones') { connectionsContent = value; continue; } let sectionTitle = ''; let className = 'application-context'; let contentHTML = `<div>${value}</div>`; switch (key) { case 'aplicacion': sectionTitle = 'Aplicaci√≥n en Nuestro Estudio'; break; case 'how_it_works': sectionTitle = '¬øC√≥mo Funciona? (La L√≥gica)'; className = 'interpretation-guide'; break; case 'why_this_r': sectionTitle = '¬øPor qu√© esta "r" y no otra?'; className = 'interpretation-guide'; break; case 'why_this_tool': sectionTitle = '¬øPor qu√© esta herramienta espec√≠fica?'; className = 'interpretation-guide'; break; case 'why_two_measures': sectionTitle = 'Alfa (Œ±) vs. Omega (œâ): ¬øPor qu√© dos medidas?'; className = 'interpretation-guide'; break; case 'composicion': sectionTitle = '¬øQui√©nes Participaron?'; break; case 'explicacion_desbalance': sectionTitle = 'El Desbalance y los Grupos No Equivalentes'; className = 'interpretation-guide'; break; case 'implicaciones': sectionTitle = 'La Soluci√≥n Metodol√≥gica: ¬øC√≥mo Mitigamos los Riesgos?'; break; case 'interpretacion': sectionTitle = 'Interpretaci√≥n de Nuestros Resultados'; break; case 'the_main_question': sectionTitle = 'La Pregunta Principal: Potencia Estad√≠stica'; break; case 'secondary_analysis': sectionTitle = 'Nota sobre la Representatividad'; className = 'interpretation-guide'; break; default: continue; } mainContent += `<div class="info-section"><h3>${sectionTitle}</h3><div class="${className}">${contentHTML}</div></div>`; } modalContent = mainContent + connectionsContent; } modalContent += `<div class="modal-navigation"><button id="prevTool" class="nav-btn" ${currentToolIndex <= 0 ? 'disabled' : ''}>‚Üê Anterior</button><button id="nextTool" class="nav-btn" ${currentToolIndex >= filteredTools.length - 1 ? 'disabled' : ''}>Siguiente ‚Üí</button></div>`; modalToolBody.innerHTML = modalContent; if (contentKey === 'formulas') { activateAccordion(); } document.getElementById('prevTool')?.addEventListener('click', navigateToPrevTool); document.getElementById('nextTool')?.addEventListener('click', navigateToNextTool); closeModal.focus(); }
        function activateAccordion() { const accordionHeaders = document.querySelectorAll('.accordion-header'); accordionHeaders.forEach(header => { header.addEventListener('click', () => { const currentlyActive = document.querySelector('.accordion-header.active'); if(currentlyActive && currentlyActive !== header) { currentlyActive.classList.remove('active'); currentlyActive.nextElementSibling.style.maxHeight = null; currentlyActive.nextElementSibling.style.padding = "0 20px"; } header.classList.toggle('active'); const content = header.nextElementSibling; if (content.style.maxHeight) { content.style.maxHeight = null; content.style.padding = "0 20px"; } else { content.style.maxHeight = content.scrollHeight + 40 + "px"; content.style.padding = "20px"; } }); }); }
        function openFormulaGuide(sectionId) { openToolModal('formulas'); setTimeout(() => { const accordionItem = document.getElementById(`accordion-${sectionId}`); if (accordionItem) { const header = accordionItem.querySelector('.accordion-header'); if (header && !header.classList.contains('active')) { header.click(); } accordionItem.scrollIntoView({ behavior: 'smooth', block: 'center' }); } }, 150); }
        function navigateToPrevTool() { if (currentToolIndex > 0) { openToolModal(filteredTools[currentToolIndex - 1].contentKey); } }
        function navigateToNextTool() { if (currentToolIndex < filteredTools.length - 1) { openToolModal(filteredTools[currentToolIndex + 1].contentKey); } }
        function closeToolModal() { toolModal.style.display = 'none'; document.body.style.overflow = 'auto'; }
        closeModal.addEventListener('click', closeToolModal); toolModal.addEventListener('click', e => { if (e.target === toolModal) closeToolModal(); }); toolSearch.addEventListener('input', e => renderPhaseCards(e.target.value));
        document.addEventListener('keydown', e => { if (e.key === 'Escape' && toolModal.style.display === 'block') closeToolModal(); if (toolModal.style.display === 'block') { if (e.key === 'ArrowLeft') navigateToPrevTool(); if (e.key === 'ArrowRight') navigateToNextTool(); } });
        window.openToolModal = openToolModal; window.openFormulaGuide = openFormulaGuide;
        document.addEventListener('DOMContentLoaded', () => { renderPhaseCards(); const params = new URLSearchParams(window.location.search); const toolToOpen = params.get('tool'); if (toolToOpen && studyContent[toolToOpen]) { setTimeout(() => { openToolModal(toolToOpen); }, 100); } });
    </script>
</body>
</html>